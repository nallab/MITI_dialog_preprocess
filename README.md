# MITI Coding に基づいたコーディング予測
## 背景
- 動機づけ面接においては、例えば「禁煙したい」等の標的を持った相談者がおり、それに対し専門的な教育を受けたカウンセラーが協働的面接を通してその達成へ導く。これに対し[MITIコーディングマニュアル](https://casaa.unm.edu/download/MITI4_2-Japanese.pdf)とは、あるカウンセラーがどれだけ上手に動機づけ面接を使いこなしているか、あるいは使いこなせていないかを評価し、臨床スキルを高める場合に活用するための指針である。面接者の発言に付与されるコードは「情報提供」「説得」「単純な聞き返し」等、「コード無し」を含めて全11種であり、マニュアル化されているが、このコードを付与するタスク自体にも専門性が求められるため、コードを自動付与したい。
- 備考
    - 2020年3月時点
        - [MITIコーディングマニュアル](https://casaa.unm.edu/download/MITI4_2-Japanese.pdf)による質評価は、原則に乗っ取ると「実対話中の任意の20分を切り出して評価」する模様。対話冒頭20分かもしれないし、途中もしくは最後の20分かもしれない。また場合によっては対話全体を用意する可能性もある。相談者と面談者のペアによる一連の対話にコーディングが付与されたデータを1ケースとする。
        - MITIコーディングにおける「コード」とは、機械学習におけるラベルと考えて良い。ただしラベルを付与する対象に関する条件（単位が文なのか発言やり取り1件単位なのか等）は必ずしも明確ではないが、データセット上はラベル付与するのに適した分割がなされた状態で用意される。
        - ラベルはマルチラベルとなる可能性がある。むしろマニュアル的にはマルチラベル前提になっているが、データセット構築の際にはシングル or マルチどちらになるか未決定。

## データセットの構築イメージ
- データセットは複数のケースがあり、1ケースは複数対話が含まれている。コードによっては発話そのものだけでの判定が困難であり、その前の発話（以降、これを文脈と呼ぶ）を踏まえた判断が求められる。しかしどこまで文脈として含めるべきかは不明のため、前処理として文脈設定を調整しやすくすることが本モジュールの想定ゴール。
- イメージとしては、複数ケースを読み込み、各ケースから複数サンプルを下記の「4つ組」で取得することを想定している。
    - context: 含めるべき文脈。
        - bodyが1発話目の場合にはその直前発話がない。このように該当がない場合には``<NA>``のような制御コードを付与する予定。
        - どこまで遡るかをパラメータ指定。
    - body: 判定対象発話。
        - MITIコードが付与された発話文そのもの。
    - target: 標的行動。
        - 相談者の達成したい目標のこと。テキスト。
    - label: MITIコード。
        - 後述の臨床家コード。コードなしを含めて11種。

## データセットの例
- 実際のデータセットは個人情報等の問題から非公開である。ここでは問題をイメージしやすくするため、仮想のデータを用意してみる。
  - [仮想データ](./dataset/README.md)

## 用語定義
- MI, Motivational Interviewing：動機づけ面接
    - MITI：[MI Treatment Integrity Coding Manual（コーディングマニュアル）](https://casaa.unm.edu/download/MITI4_2-Japanese.pdf)の俗称。「マイティ」と発音。
    - 相談者、クライエント
        - クライエントコード
            - MISCにより定義される。
    - 標的行動
        - クライエントが達成したい目標。
    - 面談者、臨床家
        - 総合評価（global scores）
            - 全体的なやり取りの特徴を評価する。2020年3月時点ではここは扱わない。
        - 行動カウント（behavior counts）
            - 臨床家の特定の行動の事例を集計しながら評価する。2020年3月時点では発話へのコード推定を行う。
        - <a name="MITI_Code">**臨床家コード**（コーディングマニュアル, pp.13-）</a>
            - 情報提供【GI】, Giving Information
            - 説得【Persuade】
            - 許可を得た説得【Persuade with】
            - 質問【Q】, Question
            - 単純な聞き返し【SR】, Simple Reflection
            - 複雑な聞き返し【CR】, Complex Reflection
            - 是認【AF】, Affirm
            - 連携関係の探索【Seek】, Seeking Collaboration
            - 自律性の強調【Emphasize】, Emphasizing Autonomy
            - 直面化【Emphasize】
            - コードなし（NA）
                - コーディングマニュアル, p.32参照
- [自然言語処理用語](http://www.jaist.ac.jp/project/NLP_Portal/doc/glossary/index.html)
    - discourse（談話）：読話を含めた複数の発話からなる文章。
    - dialog, dialogue（対話）：談話のうち、二人以上の主体が主として言語の発話によって共通の話題をやり取りするコミュニケーション形態。
    - utterance（発話）：人によって発せられた文もしくは句のこと。対話における個々の発言を指すことが多い。ここでは「相談者の発話」「面談者の発話」がある。
    - 対話行為：話し手が発話したとき、その話し手の意図を表わす抽象的概念のこと。
    - context（文脈）：文脈の定義は様々だが、一般的には1文に閉じた文解析・文理解ではなく、複数文の内容を踏まえ、その文がどのような意味を持つかを解析するために1文を超えて処理する際の対象のこと。教義には、Word2Vecにおける着目単語の前後k単語を文脈と呼ぶこともある。

## 関連リンク
- [Motivational Interviewing Treatment Integrity Coding Manual 4.2.1](https://casaa.unm.edu/download/MITI4_2-Japanese.pdf)
- [Tanana M, Hallgren KA, Imel ZE, Atkins DC, Srikumar V. A Comparison of Natural Language Processing Methods for Automated Coding of Motivational Interviewing. J Subst Abuse Treat. 2016;65:43–50. doi:10.1016/j.jsat.2016.01.006](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4842096/)
